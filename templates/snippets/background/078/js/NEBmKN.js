(function() {
  //  Isomer.JS Engine
  //  That can be used as external resource but with attribution to:
  //  https://codepen.io/FelixLuciano/pen/NEBmKN

  //  Dependences:
  //   + Isomer.JS: https://github.com/jdan/isomer
  //   + TinyColor: https://github.com/bgrins/TinyColor

  //  Last update: 30/11
  var Color, Path, Point, Shape, TinyColor, Vector, configurationModel;

  ({Point, Path, Shape, Vector, Color} = Isomer);

  TinyColor = tinycolor;

  configurationModel = {
    el: '#Isomer',
    scope: {},
    shapes: function() {
      return [];
    },
    loop: null,
    beforeInit: null
  };

  window.Engine = (function() {
    class Engine {
      constructor(configuration) {
        this.config = Object.assign(configurationModel, configuration);
        this.$Isomer = new Isomer(document.querySelector(this.config.el));
        this.scope = this.config.scope;
        this.shapes = this.config.shapes;
        this.wasInitiated = false;
        this.$Isomer.offsetX = 0;
        this.$Isomer.offsetY = 200;
        this.updateCanvasSize();
        window.addEventListener('resize', () => {
          this.updateCanvasSize();
          if (this.wasInitiated && !this.config.loop) {
            return this.render();
          }
        });
        if (this.config.beforeInit) {
          this.config.beforeInit.call(this);
        } else {
          this.init();
        }
      }

      updateCanvasSize() {
        this.$Isomer.canvas.elem.width = window.innerWidth * 2;
        this.$Isomer.canvas.elem.height = window.innerHeight * 2;
        this.$Isomer.canvas.width = window.innerWidth * 2;
        this.$Isomer.canvas.height = window.innerHeight * 2;
        this.$Isomer.originX = window.innerWidth - this.$Isomer.offsetX;
        return this.$Isomer.originY = window.innerHeight + this.$Isomer.offsetY;
      }

      render() {
        var i, len, length, obj, origin, points, ref, shape, type;
        ref = this.shapes.call(this.scope);
        for (i = 0, len = ref.length; i < len; i++) {
          shape = ref[i];
          if (shape.hide) {
            continue;
          }
          type = shape.type || 'prism';
          obj = null;
          if (type === 'prism' || type === 'pyramid') {
            origin = new Point(shape.origin.x, shape.origin.y, shape.origin.z);
            length = shape.length;
            if (type === 'prism') {
              obj = Shape.Prism(origin, length.x, length.y, length.z);
            } else if (type === 'pyramid') {
              obj = Shape.Pyramid(origin, length.x, length.y, length.z);
            }
          }
          if (type === 'cylinder') {
            origin = new Point(shape.origin.x, shape.origin.y, shape.origin.z);
            obj = Shape.Cylinder(origin, shape.radius, shape.vertices, shape.length);
          }
          if (type === 'path') {
            points = shape.points.map(function(point) {
              return new Point(point.x, point.y, point.z);
            });
            obj = new Path(points);
            if (shape.extrude) {
              obj = Shape.extrude(obj, shape.length);
            }
          }
          if (shape.translate) {
            obj = obj.translate(shape.translate.x, shape.translate.y, shape.translate.z);
          }
          if (shape.scale) {
            if (!shape.scale.origin) {
              shape.scale.origin = this.util.shapeCenter(shape);
            }
            obj = obj.scale(shape.scale.origin, shape.scale.x, shape.scale.y, shape.scale.z);
          }
          if (shape.rotateZ) {
            if (!shape.rotateZ.origin) {
              shape.rotateZ.origin = this.util.shapeCenter(shape);
            }
            obj = obj.rotateZ(shape.rotateZ.origin, this.util.rotation(shape.rotateZ.rotation));
          }
          if (shape.rotateY) {
            if (!shape.rotateY.origin) {
              shape.rotateY.origin = this.util.shapeCenter(shape);
            }
            obj = obj.rotateY(shape.rotateY.origin, this.util.rotation(shape.rotateY.rotation));
          }
          if (shape.rotateX) {
            if (!shape.rotateX.origin) {
              shape.rotateX.origin = this.util.shapeCenter(shape);
            }
            obj = obj.rotateX(shape.rotateX.origin, this.util.rotation(shape.rotateX.rotation));
          }
          this.$Isomer.add(obj, this.util.color(shape.color));
        }
      }

      clear() {
        return this.$Isomer.canvas.clear();
      }

      loop() {
        this.clear();
        this.render();
        if (this.config.loop) {
          this.config.loop.call(this.scope, this.$Isomer);
        }
        return requestAnimationFrame(() => {
          return this.loop(this.config.loop);
        });
      }

      init() {
        this.updateCanvasSize();
        if (this.config.loop) {
          this.loop();
        } else {
          this.render();
        }
        return this.wasInitiated = true;
      }

    };

    Engine.prototype.util = {
      color: function(colorCode) {
        var converted;
        converted = TinyColor(colorCode);
        return new Color(converted._r, converted._g, converted._b, converted._a);
      },
      rotation: function(degrees) {
        return degrees * Math.PI / 180;
      },
      shapeCenter: function(shape) {
        return {
          x: shape.origin.x + shape.length.x / 2,
          y: shape.origin.y + shape.length.y / 2,
          z: shape.origin.z + shape.length.z / 2
        };
      }
    };

    return Engine;

  }).call(this);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBQTs7Ozs7Ozs7O0FBQUEsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLE1BQUEsRUFBQTs7RUFXQSxDQUFBLENBQUUsS0FBRixFQUFTLElBQVQsRUFBZSxLQUFmLEVBQXNCLE1BQXRCLEVBQThCLEtBQTlCLENBQUEsR0FBd0MsTUFBeEM7O0VBQ0EsU0FBQSxHQUFZOztFQUVaLGtCQUFBLEdBQ0U7SUFBQSxFQUFBLEVBQUksU0FBSjtJQUNBLEtBQUEsRUFBTyxDQUFBLENBRFA7SUFFQSxNQUFBLEVBQVEsUUFBQSxDQUFBLENBQUE7YUFBRztJQUFILENBRlI7SUFHQSxJQUFBLEVBQU0sSUFITjtJQUlBLFVBQUEsRUFBWTtFQUpaOztFQU9JLE1BQU0sQ0FBQztJQUFiLE1BQUEsT0FBQTtNQUNFLFdBQWEsQ0FBQyxhQUFELENBQUE7UUFDWCxJQUFDLENBQUEsTUFBRCxHQUFVLE1BQU0sQ0FBQyxNQUFQLENBQWMsa0JBQWQsRUFBa0MsYUFBbEM7UUFFVixJQUFDLENBQUEsT0FBRCxHQUFXLElBQUksTUFBSixDQUFXLFFBQVEsQ0FBQyxhQUFULENBQXVCLElBQUMsQ0FBQSxNQUFNLENBQUMsRUFBL0IsQ0FBWDtRQUNYLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBQyxDQUFBLE1BQU0sQ0FBQztRQUNqQixJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxNQUFNLENBQUM7UUFDbEIsSUFBQyxDQUFBLFlBQUQsR0FBZ0I7UUFFaEIsSUFBQyxDQUFBLE9BQU8sQ0FBQyxPQUFULEdBQW1CO1FBQ25CLElBQUMsQ0FBQSxPQUFPLENBQUMsT0FBVCxHQUFtQjtRQUVuQixJQUFDLENBQUEsZ0JBQUQsQ0FBQTtRQUNBLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxDQUFBLENBQUEs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QURyQztVQUVBLENBQUEsRUFBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQWIsR0FBaUIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFiLEdBQWlCO1FBRnJDO01BRFc7SUFQYjs7Ozs7QUFsREoiLCJzb3VyY2VzQ29udGVudCI6WyIjICBJc29tZXIuSlMgRW5naW5lXG4jICBUaGF0IGNhbiBiZSB1c2VkIGFzIGV4dGVybmFsIHJlc291cmNlIGJ1dCB3aXRoIGF0dHJpYnV0aW9uIHRvOlxuIyAgaHR0cHM6Ly9jb2RlcGVuLmlvL0ZlbGl4THVjaWFuby9wZW4vTkVCbUtOXG4jICBcbiMgIERlcGVuZGVuY2VzOlxuIyAgICsgSXNvbWVyLkpTOiBodHRwczovL2dpdGh1Yi5jb20vamRhbi9pc29tZXJcbiMgICArIFRpbnlDb2xvcjogaHR0cHM6Ly9naXRodWIuY29tL2Jncmlucy9UaW55Q29sb3JcbiMgIFxuIyAgTGFzdCB1cGRhdGU6IDMwLzExXG5cblxueyBQb2ludCwgUGF0aCwgU2hhcGUsIFZlY3RvciwgQ29sb3IgfSA9IElzb21lclxuVGlueUNvbG9yID0gdGlueWNvbG9yXG5cbmNvbmZpZ3VyYXRpb25Nb2RlbCA9IFxuICBlbDogJyNJc29tZXInXG4gIHNjb3BlOiB7fVxuICBzaGFwZXM6IC0+IFtdXG4gIGxvb3A6IG51bGxcbiAgYmVmb3JlSW5pdDogbnVsbFxuXG4gIFxuY2xhc3Mgd2luZG93LkVuZ2luZVxuICBjb25zdHJ1Y3RvcjogKGNvbmZpZ3VyYXRpb24pIC0+XG4gICAgQGNvbmZpZyA9IE9iamVjdC5hc3NpZ24gY29uZmlndXJhdGlvbk1vZGVsLCBjb25maWd1cmF0aW9uXG4gICAgXG4gICAgQCRJc29tZXIgPSBuZXcgSXNvbWVyIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgQGNvbmZpZy5lbFxuICAgIEBzY29wZSA9IEBjb25maWcuc2NvcGVcbiAgICBAc2hhcGVzID0gQGNvbmZpZy5zaGFwZXNcbiAgICBAd2FzSW5pdGlhdGVkID0gZmFsc2VcblxuICAgIEAkSXNvbWVyLm9mZnNldFggPSAwXG4gICAgQCRJc29tZXIub2Zmc2V0WSA9IDIwMFxuICAgIFxuICAgIEB1cGRhdGVDYW52YXNTaXplKClcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAncmVzaXplJywgPT5cbiAgICAgIEB1cGRhdGVDYW52YXNTaXplKClcbiAgICAgIFxuICAgICAgaWYgQHdhc0luaXRpYXRlZCBhbmQgIUBjb25maWcubG9vcFxuICAgICAgICBAcmVuZGVyKClcbiAgICBcbiAgICBpZiBAY29uZmlnLmJlZm9yZUluaXRcbiAgICAgIEBjb25maWcuYmVmb3JlSW5pdC5jYWxsIHRoaXNcbiAgICAgIFxuICAgIGVsc2VcbiAgICAgIEBpbml0KClcbiAgICBcbiAgICBcbiAgICBcbiAgdXRpbDpcbiAgICBjb2xvcjogKGNvbG9yQ29kZSkgLT5cbiAgICAgIGNvbnZlcnRlZCA9IFRpbnlDb2xvciBjb2xvckNvZGVcbiAgICAgIG5ldyBDb2xvciBjb252ZXJ0ZWQuX3IsIGNvbnZlcnRlZC5fZywgY29udmVydGVkLl9iLCBjb252ZXJ0ZWQuX2FcbiAgICAgIFxuICAgIHJvdGF0aW9uOiAoZGVncmVlcykgLT5cbiAgICAgIGRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwXG4gICAgICBcbiAgICBzaGFwZUNlbnRlcjogKHNoYXBlKSAtPlxuICAgICAgeDogc2hhcGUub3JpZ2luLnggKyBzaGFwZS5sZW5ndGgueCAvIDJcbiAgICAgIHk6IHNoYXBlLm9yaWdpbi55ICsgc2hhcGUubGVuZ3RoLnkgLyAyXG4gICAgICB6OiBzaGFwZS5vcmlnaW4ueiArIHNoYXBlLmxlbmd0aC56IC8gMlxuICAgICAgXG4gICAgICBcbiAgICAgIFxuICB1cGRhdGVDYW52YXNTaXplOiAtPlxuICAgIEAkSXNvbWVyLmNhbnZhcy5lbGVtLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggKiAyXG4gICAgQCRJc29tZXIuY2FudmFzLmVsZW0uaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogMlxuICAgIEAkSXNvbWVyLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogMlxuICAgIEAkSXNvbWVyLmNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAyXG4gICAgQCRJc29tZXIub3JpZ2luWCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gQCRJc29tZXIub2Zmc2V0WFxuICAgIEAkSXNvbWVyLm9yaWdpblkgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKyBAJElzb21lci5vZmZzZXRZXG5cbiAgICBcbiAgICBcbiAgcmVuZGVyOiAtPlxuICAgIGZvciBzaGFwZSBpbiBAc2hhcGVzLmNhbGwgQHNjb3BlXG4gICAgICBjb250aW51ZSBpZiBzaGFwZS5oaWRlXG5cbiAgICAgIHR5cGUgPSBzaGFwZS50eXBlIG9yICdwcmlzbSdcbiAgICAgIG9iaiA9IG51bGxcblxuICAgICAgXG4gICAgICBpZiB0eXBlID09ICdwcmlzbScgb3IgIHR5cGUgPT0gJ3B5cmFtaWQnXG4gICAgICAgIG9yaWdpbiA9IG5ldyBQb2ludCBzaGFwZS5vcmlnaW4ueCwgc2hhcGUub3JpZ2luLnksIHNoYXBlLm9yaWdpbi56XG4gICAgICAgIGxlbmd0aCA9IHNoYXBlLmxlbmd0aFxuICAgICAgICBcbiAgICAgICAgaWYgdHlwZSA9PSAncHJpc20nXG4gICAgICAgICAgb2JqID0gU2hhcGUuUHJpc20ob3JpZ2luLCBsZW5ndGgueCwgbGVuZ3RoLnksIGxlbmd0aC56KVxuICAgICAgICAgIFxuICAgICAgICBlbHNlIGlmIHR5cGUgPT0gJ3B5cmFtaWQnXG4gICAgICAgICAgb2JqID0gU2hhcGUuUHlyYW1pZChvcmlnaW4sIGxlbmd0aC54LCBsZW5ndGgueSwgbGVuZ3RoLnopXG4gICAgICBcbiAgICAgICAgXG4gICAgICBpZiB0eXBlID09ICdjeWxpbmRlcidcbiAgICAgICAgb3JpZ2luID0gbmV3IFBvaW50IHNoYXBlLm9yaWdpbi54LCBzaGFwZS5vcmlnaW4ueSwgc2hhcGUub3JpZ2luLnpcbiAgICAgICAgXG4gICAgICAgIG9iaiA9IFNoYXBlLkN5bGluZGVyKG9yaWdpbiwgc2hhcGUucmFkaXVzLCBzaGFwZS52ZXJ0aWNlcywgc2hhcGUubGVuZ3RoKVxuXG4gICAgICAgIFxuICAgICAgaWYgdHlwZSA9PSAncGF0aCdcbiAgICAgICAgcG9pbnRzID0gc2hhcGUucG9pbnRzLm1hcCAocG9pbnQpIC0+IG5ldyBQb2ludCBwb2ludC54LCBwb2ludC55LCBwb2ludC56XG4gICAgICAgIG9iaiA9IG5ldyBQYXRoIHBvaW50c1xuXG4gICAgICAgIGlmIHNoYXBlLmV4dHJ1ZGVcbiAgICAgICAgICBvYmogPSBTaGFwZS5leHRydWRlIG9iaiwgc2hhcGUubGVuZ3RoXG5cblxuICAgICAgICAgIFxuICAgICAgaWYgc2hhcGUudHJhbnNsYXRlXG4gICAgICAgIG9iaiA9IG9iai50cmFuc2xhdGUgc2hhcGUudHJhbnNsYXRlLngsIHNoYXBlLnRyYW5zbGF0ZS55LCBzaGFwZS50cmFuc2xhdGUuelxuXG4gICAgICAgIFxuICAgICAgaWYgc2hhcGUuc2NhbGVcbiAgICAgICAgdW5sZXNzIHNoYXBlLnNjYWxlLm9yaWdpbiB0aGVuIHNoYXBlLnNjYWxlLm9yaWdpbiA9IEB1dGlsLnNoYXBlQ2VudGVyIHNoYXBlXG4gICAgICAgIFxuICAgICAgICBvYmogPSBvYmouc2NhbGUgc2hhcGUuc2NhbGUub3JpZ2luLCBzaGFwZS5zY2FsZS54LCBzaGFwZS5zY2FsZS55LCBzaGFwZS5zY2FsZS56XG5cbiAgICAgICAgXG4gICAgICBpZiBzaGFwZS5yb3RhdGVaXG4gICAgICAgIHVubGVzcyBzaGFwZS5yb3RhdGVaLm9yaWdpbiB0aGVuIHNoYXBlLnJvdGF0ZVoub3JpZ2luID0gQHV0aWwuc2hhcGVDZW50ZXIgc2hhcGVcbiAgICAgICAgXG4gICAgICAgIG9iaiA9IG9iai5yb3RhdGVaIHNoYXBlLnJvdGF0ZVoub3JpZ2luLCBAdXRpbC5yb3RhdGlvbiBzaGFwZS5yb3RhdGVaLnJvdGF0aW9uXG5cbiAgICAgICAgXG4gICAgICBpZiBzaGFwZS5yb3RhdGVZXG4gICAgICAgIHVubGVzcyBzaGFwZS5yb3RhdGVZLm9yaWdpbiB0aGVuIHNoYXBlLnJvdGF0ZVkub3JpZ2luID0gQHV0aWwuc2hhcGVDZW50ZXIgc2hhcGVcbiAgICAgICAgXG4gICAgICAgIG9iaiA9IG9iai5yb3RhdGVZIHNoYXBlLnJvdGF0ZVkub3JpZ2luLCBAdXRpbC5yb3RhdGlvbiBzaGFwZS5yb3RhdGVZLnJvdGF0aW9uXG5cbiAgICAgICAgXG4gICAgICBpZiBzaGFwZS5yb3RhdGVYXG4gICAgICAgIHVubGVzcyBzaGFwZS5yb3RhdGVYLm9yaWdpbiB0aGVuIHNoYXBlLnJvdGF0ZVgub3JpZ2luID0gQHV0aWwuc2hhcGVDZW50ZXIgc2hhcGVcbiAgICAgICAgXG4gICAgICAgIG9iaiA9IG9iai5yb3RhdGVYIHNoYXBlLnJvdGF0ZVgub3JpZ2luLCBAdXRpbC5yb3RhdGlvbiBzaGFwZS5yb3RhdGVYLnJvdGF0aW9uXG5cblxuICAgICAgQCRJc29tZXIuYWRkIG9iaiwgQHV0aWwuY29sb3Ioc2hhcGUuY29sb3IpXG4gICAgICBcbiAgICByZXR1cm5cbiAgICAgIFxuICAgICAgXG4gICAgICBcbiAgY2xlYXI6IC0+XG4gICAgQCRJc29tZXIuY2FudmFzLmNsZWFyKClcbiAgXG4gIFxuICBcbiAgbG9vcDogLT5cbiAgICBAY2xlYXIoKVxuICAgIEByZW5kZXIoKVxuICAgIFxuICAgIGlmIEBjb25maWcubG9vcCB0aGVuIEBjb25maWcubG9vcC5jYWxsIEBzY29wZSwgQCRJc29tZXJcbiAgICBcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT4gQGxvb3AgQGNvbmZpZy5sb29wXG4gIFxuICBcbiAgXG4gIGluaXQ6IC0+XG4gICAgQHVwZGF0ZUNhbnZhc1NpemUoKVxuICAgIFxuICAgIGlmIEBjb25maWcubG9vcCBcbiAgICAgIEBsb29wKClcbiAgICBlbHNlXG4gICAgICBAcmVuZGVyKClcbiAgICAgIFxuICAgIEB3YXNJbml0aWF0ZWQgPSB0cnVlXG4iXX0=
//# sourceURL=coffeescript